(function(n,t){"use strict";function u(n,t){for(var u,e=[],r=0;r<n.length;++r){if(u=i[n[r]]||f(n[r]),!u)throw"module definition dependecy not found: "+n[r];e.push(u)}t.apply(null,e)}function r(n,r,f){if(typeof n!="string")throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(f===t)throw"invalid module definition, definition function must be specified";u(r,function(){i[n]=f.apply(null,arguments)})}function f(t){for(var i=n,u=t.split(/[.\/]/),r=0;r<u.length;++r){if(!i[u[r]])return;i=i[u[r]]}return i}var i={};r("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env"],function(n,i){function u(n,t){return parseInt(n.getAttribute(t)||1,10)}var r=n.each;return function(f,e){function d(){var n=0;o=[];w=0;r(["thead","tbody","tfoot"],function(t){var i=s.select("> "+t+" tr",e);r(i,function(i,f){f+=n;r(s.select("> td, > th",i),function(n,i){var e,r,s,h;if(o[f])while(o[f][i])i++;for(s=u(n,"rowspan"),h=u(n,"colspan"),r=f;r<f+s;r++)for(o[r]||(o[r]=[]),e=i;e<i+h;e++)o[r][e]={part:t,real:r==f&&e==i,elm:n,rowspan:s,colspan:h};w=Math.max(w,i+1)})});n+=i.length})}function g(n,t){return n=n.cloneNode(t),n.removeAttribute("id"),n}function k(n,t){var i;return i=o[t],i?i[n]:void 0}function c(n,t,i){n&&(i=parseInt(i,10),i===1?n.removeAttribute(t,1):n.setAttribute(t,i,1))}function b(n){return n&&(s.hasClass(n.elm,"mce-item-selected")||n==y)}function nt(){var n=[];return r(e.rows,function(t){r(t.cells,function(i){if(s.hasClass(i,"mce-item-selected")||y&&i==y.elm)return n.push(t),!1})}),n}function ut(){var n=s.createRng();n.setStartAfter(e);n.setEndAfter(e);a.setRng(n);s.remove(e)}function p(t){var u,e={};return f.settings.table_clone_elements!==!1&&(e=n.makeMap((f.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),n.walk(t,function(n){var f;if(n.nodeType==3)return r(s.getParents(n.parentNode,null,t).reverse(),function(n){e[n.nodeName]&&(n=g(n,!1),u?f&&f.appendChild(n):u=f=n,f=n)}),f&&(f.innerHTML=i.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes"),t=g(t,!1),c(t,"rowSpan",1),c(t,"colSpan",1),u?t.appendChild(u):(!i.ie||i.ie>10)&&(t.innerHTML='<br data-mce-bogus="1" />'),t}function tt(){var t=s.createRng(),n;if(r(s.select("tr",e),function(n){n.cells.length===0&&s.remove(n)}),s.select("tr",e).length===0){t.setStartBefore(e);t.setEndBefore(e);a.setRng(t);s.remove(e);return}r(s.select("thead,tbody,tfoot",e),function(n){n.rows.length===0&&s.remove(n)});d();h&&(n=o[Math.min(o.length-1,h.y)],n&&(a.select(n[Math.min(n.length-1,h.x)].elm,!0),a.collapse(!0)))}function it(n,t,i,r){for(var e,f,c,u=o[t][n].elm.parentNode,h=1;h<=i;h++)if(u=s.getNext(u,"tr"),u){for(e=n;e>=0;e--)if(c=o[t+h][e].elm,c.parentNode==u){for(f=1;f<=r;f++)s.insertAfter(p(c),c);break}if(e==-1)for(f=1;f<=r;f++)u.insertBefore(p(u.cells[0]),u.cells[0])}}function rt(){r(o,function(n,t){r(n,function(n,i){var r,f,e;if(b(n)&&(n=n.elm,r=u(n,"colspan"),f=u(n,"rowspan"),r>1||f>1)){for(c(n,"rowSpan",1),c(n,"colSpan",1),e=0;e<r-1;e++)s.insertAfter(p(n),n);it(i,t,f-1,r)}})})}function ft(t,i,u){var it,e,a,w,g,nt,y,f,ut,p,ft;if(t?(it=v(t),e=it.x,a=it.y,w=e+(i-1),g=a+(u-1)):(h=l=null,r(o,function(n,t){r(n,function(n,i){b(n)&&(h||(h={x:i,y:t}),l={x:i,y:t})})}),h&&(e=h.x,a=h.y,w=l.x,g=l.y)),f=k(e,a),ut=k(w,g),f&&ut&&f.part==ut.part){for(rt(),d(),f=k(e,a).elm,c(f,"colSpan",w-e+1),c(f,"rowSpan",g-a+1),y=a;y<=g;y++)for(nt=e;nt<=w;nt++)o[y]&&o[y][nt]&&(t=o[y][nt].elm,t!=f&&(p=n.grep(t.childNodes),r(p,function(n){f.appendChild(n)}),p.length&&(p=n.grep(f.childNodes),ft=0,r(p,function(n){n.nodeName=="BR"&&s.getAttrib(n,"data-mce-bogus")&&ft++<p.length-1&&f.removeChild(n)})),s.remove(t)));tt()}}function et(n){var i,f,w,e,l,a,v,y,h;if(r(o,function(t,u){return r(t,function(t){if(b(t)&&(t=t.elm,l=t.parentNode,a=g(l,!1),i=u,n))return!1}),n?!i:void 0}),i!==t){for(e=0;e<o[0].length;e++)if(o[i][e]&&(f=o[i][e].elm,f!=w)){if(n){if(i>0&&o[i-1][e]&&(y=o[i-1][e].elm,h=u(y,"rowSpan"),h>1)){c(y,"rowSpan",h+1);continue}}else if(h=u(f,"rowspan"),h>1){c(f,"rowSpan",h+1);continue}v=p(f);c(v,"colSpan",f.colSpan);a.appendChild(v);w=f}a.hasChildNodes()&&(n?l.parentNode.insertBefore(a,l):s.insertAfter(a,l))}}function ot(n){var t,i;r(o,function(i){return r(i,function(i,r){if(b(i)&&(t=r,n))return!1}),n?!t:void 0});r(o,function(r,f){var e,h,o;r[t]&&(e=r[t].elm,e!=i&&(o=u(e,"colspan"),h=u(e,"rowspan"),o==1?n?(e.parentNode.insertBefore(p(e),e),it(t,f,h-1,o)):(s.insertAfter(p(e),e),it(t,f,h-1,o)):c(e,"colSpan",e.colSpan+1),i=e))})}function st(){var t=[];r(o,function(i){r(i,function(i,f){b(i)&&n.inArray(t,f)===-1&&(r(o,function(n){var t=n[f].elm,i;i=u(t,"colSpan");i>1?c(t,"colSpan",i-1):s.remove(t)}),t.push(f))})});tt()}function ht(){function t(n){var t,i;r(n.cells,function(n){var i=u(n,"rowSpan");i>1&&(c(n,"rowSpan",i-1),t=v(n),it(t.x,t.y,1,1))});t=v(n.cells[0]);r(o[t.y],function(n){var t;n=n.elm;n!=i&&(t=u(n,"rowSpan"),t<=1?s.remove(n):c(n,"rowSpan",t-1),i=n)})}var n;n=nt();r(n.reverse(),function(n){t(n)});tt()}function ct(){var n=nt();return s.remove(n),tt(),n}function lt(){var n=nt();return r(n,function(t,i){n[i]=g(t,!0)}),n}function at(n,t){var f=nt(),i=f[t?0:f.length-1],u=i.cells.length;n&&(r(o,function(n){var t;return u=0,r(n,function(n){n.real&&(u+=n.colspan);n.elm.parentNode==i&&(t=1)}),t?!1:void 0}),t||n.reverse(),r(n,function(n){for(var f=n.cells.length,e,r=0;r<f;r++)e=n.cells[r],c(e,"colSpan",1),c(e,"rowSpan",1);for(r=f;r<u;r++)n.appendChild(p(n.cells[f-1]));for(r=u;r<f;r++)s.remove(n.cells[r]);t?i.parentNode.insertBefore(n,i):s.insertAfter(n,i)}),s.removeClass(s.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"))}function v(n){var t;return r(o,function(i,u){return r(i,function(i,r){if(i.elm==n)return t={x:r,y:u},!1}),!t}),t}function vt(n){h=v(n)}function yt(){var n,t;return n=t=0,r(o,function(i,u){r(i,function(i,r){var f,e;b(i)&&(i=o[u][r],r>n&&(n=r),u>t&&(t=u),i.real&&(f=i.colspan-1,e=i.rowspan-1,f&&r+f>n&&(n=r+f),e&&u+e>t&&(t=u+e)))})}),{x:n,y:t}}function pt(n){var r,u,y,p,f,e,c,a,t,i;if(l=v(n),h&&l){for(r=Math.min(h.x,l.x),u=Math.min(h.y,l.y),y=Math.max(h.x,l.x),p=Math.max(h.y,l.y),f=y,e=p,i=u;i<=e;i++)n=o[i][r],n.real||r-(n.colspan-1)<r&&(r-=n.colspan-1);for(t=r;t<=f;t++)n=o[u][t],n.real||u-(n.rowspan-1)<u&&(u-=n.rowspan-1);for(i=u;i<=p;i++)for(t=r;t<=y;t++)n=o[i][t],n.real&&(c=n.colspan-1,a=n.rowspan-1,c&&t+c>f&&(f=t+c),a&&i+a>e&&(e=i+a));for(s.removeClass(s.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),i=u;i<=e;i++)for(t=r;t<=f;t++)o[i][t]&&s.addClass(o[i][t].elm,"mce-item-selected")}}function wt(n,t){var u,r,i;u=v(n);r=u.y*w+u.x;do{if(r+=t,i=k(r%w,Math.floor(r/w)),!i)break;if(i.elm!=n)return a.select(i.elm,!0),s.isEmpty(i.elm)&&a.collapse(!0),!0}while(i.elm==n);return!1}var o,w,h,l,y,a=f.selection,s=a.dom;e=e||s.getParent(a.getStart(),"table");d();y=s.getParent(a.getStart(),"th,td");y&&(h=v(y),l=yt(),y=k(h.x,h.y));n.extend(this,{deleteTable:ut,split:rt,merge:ft,insertRow:et,insertCol:ot,deleteCols:st,deleteRows:ht,cutRows:ct,copyRows:lt,pasteRows:at,getPos:v,setStartCell:vt,setEndCell:pt,moveRelIdx:wt,refresh:d})}});r("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/Env","tinymce/util/Tools"],function(n,t,i){function r(n,t){return parseInt(n.getAttribute(t)||1,10)}var u=i.each;return function(i){function o(){function t(t){function h(n,r){var e=n?"previousSibling":"nextSibling",u=i.dom.getParent(r,"tr"),o=u[e],f;if(o)return c(i,r,o,n),t.preventDefault(),!0;var s=i.dom.getParent(u,"table"),h=u.parentNode,a=h.nodeName.toLowerCase();return(a==="tbody"||a===(n?"tfoot":"thead"))&&(f=l(n,s,h,"tbody"),f!==null)?v(n,f,r):y(n,u,e,s)}function l(n,t,r,u){var f=i.dom.select(">"+u,t),e=f.indexOf(r),o;return n&&e===0||!n&&e===f.length-1?a(n,t):e===-1?(o=r.tagName.toLowerCase()==="thead"?0:f.length-1,f[o]):f[e+(n?-1:1)]}function a(n,t){var u=n?"thead":"tfoot",r=i.dom.select(">"+u,t);return r.length!==0?r[0]:null}function v(n,r,u){var f=e(r,n);return f&&c(i,u,f,n),t.preventDefault(),!0}function y(n,r,u,f){var c=f[u],s,l;return c?(o(c),!0):(s=i.dom.getParent(f,"td,th"),s?h(n,s,t):(l=e(r,!n),o(l),t.preventDefault(),!1))}function e(n,t){var r=n&&n[t?"lastChild":"firstChild"];return r&&r.nodeName==="BR"?i.dom.getParent(r,"td,th"):r}function o(n){i.selection.setCursorLocation(n,0)}function p(){return f==n.UP||f==n.DOWN}function w(n){var t=n.selection.getNode(),i=n.dom.getParent(t,"tr");return i!==null}function b(n){for(var i=0,t=n;t.previousSibling;)t=t.previousSibling,i=i+r(t,"colspan");return i}function k(n,t){var i=0,f=0;return u(n.children,function(n,u){return i=i+r(n,"colspan"),f=u,i>t?!1:void 0}),f}function c(n,t,r,u){var s=b(i.dom.getParent(t,"td,th")),h=k(r,s),f=r.childNodes[h],c=e(f,u);o(c||f)}function d(n){var u=i.selection.getNode(),t=i.dom.getParent(u,"td,th"),r=i.dom.getParent(n,"td,th");return t&&t!==r&&g(t,r)}function g(n,t){return i.dom.getParent(n,"TABLE")===i.dom.getParent(t,"TABLE")}var f=t.keyCode,s;p()&&w(i)&&(s=i.selection.getNode(),setTimeout(function(){d(s)&&h(!t.shiftKey&&f===n.UP,s,t)},0))}i.on("KeyDown",function(n){t(n)})}function f(){function n(n,t){var u=t.ownerDocument,i=u.createRange(),r;return i.setStartBefore(t),i.setEnd(n.endContainer,n.endOffset),r=u.createElement("body"),r.appendChild(i.cloneContents()),r.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length===0}i.on("KeyDown",function(t){var r,u,f=i.dom;(t.keyCode==37||t.keyCode==38)&&(r=i.selection.getRng(),u=f.getParent(r.startContainer,"table"),u&&i.getBody().firstChild==u&&n(r,u)&&(r=f.createRng(),r.setStartBefore(u),r.setEndBefore(u),i.selection.setRng(r),t.preventDefault()))})}function e(){i.on("KeyDown SetContent VisualAid",function(){for(var n=i.getBody().lastChild;n;n=n.previousSibling)if(n.nodeType==3){if(n.nodeValue.length>0)break}else if(n.nodeType==1&&(n.tagName=="BR"||!n.getAttribute("data-mce-bogus")))break;n&&n.nodeName=="TABLE"&&(i.settings.forced_root_block?i.dom.add(i.getBody(),i.settings.forced_root_block,i.settings.forced_root_block_attrs,t.ie&&t.ie<11?"&nbsp;":'<br data-mce-bogus="1" />'):i.dom.add(i.getBody(),"br",{"data-mce-bogus":"1"}))});i.on("PreProcess",function(n){var t=n.node.lastChild;t&&(t.nodeName=="BR"||t.childNodes.length==1&&(t.firstChild.nodeName=="BR"||t.firstChild.nodeValue==" "))&&t.previousSibling&&t.previousSibling.nodeName=="TABLE"&&i.dom.remove(t)})}function s(){function t(n,t,i,r){var u=n.dom.getParent(t.startContainer,"TABLE"),f,e,o;return u&&(f=u.parentNode),e=t.startContainer.nodeType==3&&t.startOffset===0&&t.endOffset===0&&r&&(i.nodeName=="TR"||i==f),o=(i.nodeName=="TD"||i.nodeName=="TH")&&!r,e||o}function n(){var r=i.selection.getRng(),f=i.selection.getNode(),u=i.dom.getParent(r.startContainer,"TD,TH"),n;if(t(i,r,f,u)){for(u||(u=f),n=u.lastChild;n.lastChild;)n=n.lastChild;n.nodeType==3&&(r.setEnd(n,n.data.length),i.selection.setRng(r))}}i.on("KeyDown",function(){n()});i.on("MouseDown",function(t){t.button!=2&&n()})}function h(){i.on("keydown",function(t){var r,u,f;if((t.keyCode==n.DELETE||t.keyCode==n.BACKSPACE)&&!t.isDefaultPrevented()&&(r=i.dom.getParent(i.selection.getStart(),"table"),r)){for(u=i.dom.select("td,th",r),f=u.length;f--;)if(!i.dom.hasClass(u[f],"mce-item-selected"))return;t.preventDefault();i.execCommand("mceTableDelete")}})}h();t.webkit&&(o(),s());t.gecko&&(f(),e());t.ie>10&&(f(),e())}});r("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(n,t,i){return function(r){function h(){r.getBody().style.webkitUserSelect="";s&&(r.dom.removeClass(r.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),s=!1)}function c(t){var h,c,i=t.target;if(e&&(f||i!=e)&&(i.nodeName=="TD"||i.nodeName=="TH")){c=u.getParent(i,"table");c==o&&(f||(f=new n(r,c),f.setStartCell(e),r.getBody().style.webkitUserSelect="none"),f.setEndCell(i),s=!0);h=r.selection.getSel();try{h.removeAllRanges?h.removeAllRanges():h.empty()}catch(l){}t.preventDefault()}}var u=r.dom,f,e,o,s=!0;r.on("MouseDown",function(n){n.button!=2&&(h(),e=u.getParent(n.target,"td,th"),o=u.getParent(e,"table"))});r.on("mouseover",c);r.on("remove",function(){u.unbind(r.getDoc(),"mouseover",c)});r.on("MouseUp",function(){function a(n,r){var u=new t(n,n);do{if(n.nodeType==3&&i.trim(n.nodeValue).length!==0){r?s.setStart(n,0):s.setEnd(n,n.nodeValue.length);return}if(n.nodeName=="BR"){r?s.setStartBefore(n):s.setEndBefore(n);return}}while(n=r?u.next():u.prev())}var s,v=r.selection,h,c,n,l;if(e){if(f&&(r.getBody().style.webkitUserSelect=""),h=u.select("td.mce-item-selected,th.mce-item-selected"),h.length>0){s=u.createRng();n=h[0];s.setStartBefore(n);s.setEndAfter(n);a(n,1);c=new t(n,u.getParent(h[0],"table"));do if(n.nodeName=="TD"||n.nodeName=="TH"){if(!u.hasClass(n,"mce-item-selected"))break;l=n}while(n=c.next());a(l);v.setRng(s)}r.nodeChanged();e=f=o=null}});r.on("KeyUp Drop",function(){h();e=f=o=null});return{clear:h}}});r("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(n,t,i,r,u,f,e){function s(u){function h(n){return n?n.replace(/px$/,""):""}function c(n){return/^[0-9]+$/.test(n)&&(n+="px"),n}function p(n){o("left center right".split(" "),function(t){u.formatter.remove("align"+t,{},n)})}function tt(n){o("top middle bottom".split(" "),function(t){u.formatter.remove("valign"+t,{},n)})}function w(n,t){return r.each(t,function(t){t.textStyle=function(){return u.formatter.getCssText({block:n,classes:[t.value]})}}),t}function b(n,t,i,f){var e,o=[];return r.each(u.settings[t]||f,function(t){var r={text:t.text||t.title,value:t.value};o.push(r);(n[i]===t.value||!e&&t.selected)&&(e=r)}),e&&(n[i]=e.value,e.selected=!0),o}function a(){var i=u.dom,n,e,s,l,t;n=i.getParent(u.selection.getStart(),"table");t={width:h(i.getStyle(n,"width")||i.getAttrib(n,"width")),height:h(i.getStyle(n,"height")||i.getAttrib(n,"height")),cellspacing:n?i.getAttrib(n,"cellspacing"):"",cellpadding:n?i.getAttrib(n,"cellpadding"):"",border:n?i.getAttrib(n,"border"):"",caption:!!i.select("caption",n)[0],"class":i.getAttrib(n,"class")};o("left center right".split(" "),function(i){u.formatter.matchNode(n,"align"+i)&&(t.align=i)});n||(e={label:"Cols",name:"cols"},s={label:"Rows",name:"rows"});u.settings.table_class_list&&(t["class"]&&(t["class"]=t["class"].replace(/\s*mce\-item\-table\s*/g,"")),l={name:"class",type:"listbox",label:"Class",values:w("table",b(t,"table_class_list","class"))});u.windowManager.open({title:"Table properties",items:{type:"form",layout:"flex",direction:"column",labelGapCalc:"children",items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,data:t,defaults:{type:"textbox",maxWidth:50},items:[e,s,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},l]},onsubmit:function(){var e;t=r.extend(t,this.toJSON());u.undoManager.transact(function(){n||(n=d(t.cols||1,t.rows||1));u.dom.setAttribs(n,{cellspacing:t.cellspacing,cellpadding:t.cellpadding,border:t.border,"class":t["class"]});u.dom.setStyles(n,{width:c(t.width),height:c(t.height)});e=i.select("caption",n)[0];e&&!t.caption&&i.remove(e);!e&&t.caption&&(e=i.create("caption"),e.innerHTML=f.ie?" ":'<br data-mce-bogus="1"/>',n.insertBefore(e,n.firstChild));p(n);t.align&&u.formatter.apply("align"+t.align,{},n);u.focus();u.addVisual()})}})}function it(n,t){u.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var i=this.toJSON();u.undoManager.transact(function(){n.merge(t,i.cols,i.rows)})}})}function rt(){var i=u.dom,t,n,e,f=[];(f=u.dom.select("td.mce-item-selected,th.mce-item-selected"),t=u.dom.getParent(u.selection.getStart(),"td,th"),!f.length&&t&&f.push(t),t=t||f[0],t)&&(n={width:h(i.getStyle(t,"width")||i.getAttrib(t,"width")),height:h(i.getStyle(t,"height")||i.getAttrib(t,"height")),scope:i.getAttrib(t,"scope"),"class":i.getAttrib(t,"class")},n.type=t.nodeName.toLowerCase(),o("left center right".split(" "),function(i){u.formatter.matchNode(t,"align"+i)&&(n.align=i)}),o("top middle bottom".split(" "),function(i){u.formatter.matchNode(t,"valign"+i)&&(n.valign=i)}),u.settings.table_cell_class_list&&(e={name:"class",type:"listbox",label:"Class",values:w("td",b(n,"table_cell_class_list","class"))}),u.windowManager.open({title:"Cell properties",items:{type:"form",layout:"flex",direction:"column",labelGapCalc:"children",items:[{type:"form",data:n,layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},e]},onsubmit:function(){n=r.extend(n,this.toJSON());u.undoManager.transact(function(){o(f,function(t){u.dom.setAttribs(t,{scope:n.scope,"class":n["class"]});u.dom.setStyles(t,{width:c(n.width),height:c(n.height)});n.type&&t.nodeName.toLowerCase()!=n.type&&(t=i.rename(t,n.type));p(t);n.align&&u.formatter.apply("align"+n.align,{},t);tt(t);n.valign&&u.formatter.apply("valign"+n.valign,{},t)});u.focus()})}}))}function ut(){var t=u.dom,e,s,i,l,n,f=[];(e=u.dom.getParent(u.selection.getStart(),"table"),s=u.dom.getParent(u.selection.getStart(),"td,th"),o(e.rows,function(n){o(n.cells,function(i){if(t.hasClass(i,"mce-item-selected")||i==s)return f.push(n),!1})}),i=f[0],i)&&(n={height:h(t.getStyle(i,"height")||t.getAttrib(i,"height")),scope:t.getAttrib(i,"scope"),"class":t.getAttrib(i,"class")},n.type=i.parentNode.nodeName.toLowerCase(),o("left center right".split(" "),function(t){u.formatter.matchNode(i,"align"+t)&&(n.align=t)}),u.settings.table_row_class_list&&(l={name:"class",type:"listbox",label:"Class",values:w("tr",b(n,"table_row_class_list","class"))}),u.windowManager.open({title:"Row properties",items:{type:"form",data:n,columns:2,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},l]},onsubmit:function(){var i,s,e;n=r.extend(n,this.toJSON());u.undoManager.transact(function(){var r=n.type;o(f,function(f){u.dom.setAttribs(f,{scope:n.scope,"class":n["class"]});u.dom.setStyles(f,{height:c(n.height)});r!=f.parentNode.nodeName.toLowerCase()&&(i=t.getParent(f,"table"),s=f.parentNode,e=t.select(r,i)[0],e||(e=t.create(r),i.firstChild?i.insertBefore(e,i.firstChild):i.appendChild(e)),e.appendChild(f),s.hasChildNodes()||t.remove(s));p(f);n.align&&u.formatter.apply("align"+n.align,{},f)});u.focus()})}}))}function e(n){return function(){u.execCommand(n)}}function d(n,t){for(var o,r,i='<table id="__mce"><tbody>',e=0;e<t;e++){for(i+="<tr>",o=0;o<n;o++)i+="<td>"+(f.ie?" ":"<br>")+"<\/td>";i+="<\/tr>"}return i+="<\/tbody><\/table>",u.insertContent(i),r=u.dom.get("__mce"),u.dom.setAttrib(r,"id",null),u.dom.setAttribs(r,u.settings.table_default_attributes||{}),u.dom.setStyles(r,u.settings.table_default_styles||{}),r}function g(n,t){function i(){n.disabled(!u.dom.getParent(u.selection.getStart(),t));u.selection.selectorChanged(t,function(t){n.disabled(!t)})}if(u.initialized)i();else u.on("init",i)}function nt(){g(this,"table")}function s(){g(this,"td,th")}function ft(){for(var n="",i,n='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">',t=0;t<10;t++){for(n+="<tr>",i=0;i<10;i++)n+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(t*10+i)+'" href="#" data-mce-x="'+i+'" data-mce-y="'+t+'"><\/a><\/td>';n+="<\/tr>"}return n+="<\/table>",n+'<div class="mce-text-center" role="presentation">1 x 1<\/div>'}function k(n,t,i){var s=i.getEl().getElementsByTagName("table")[0],r,f,h,e,o,c=i.isRtl()||i.parent().rel=="tl-tr";for(s.nextSibling.innerHTML=n+1+" x "+(t+1),c&&(n=9-n),f=0;f<10;f++)for(r=0;r<10;r++)e=s.rows[f].childNodes[r].firstChild,o=(c?r>=n:r<=n)&&f<=t,u.dom.toggleClass(e,"mce-active",o),o&&(h=e);return h.parentNode}var l,y=this,v;if(u.settings.table_grid===!1?u.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:a}):u.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(n){n.aria&&(this.parent().hideAll(),n.stopImmediatePropagation(),a())},onshow:function(){k(0,0,this.menu.items()[0])},onhide:function(){var n=this.menu.items()[0].getEl().getElementsByTagName("a");u.dom.removeClass(n,"mce-active");u.dom.addClass(n[0],"mce-active")},menu:[{type:"container",html:ft(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(n){var r=n.target,t,i;r.tagName.toUpperCase()=="A"&&(t=parseInt(r.getAttribute("data-mce-x"),10),i=parseInt(r.getAttribute("data-mce-y"),10),(this.isRtl()||this.parent().rel=="tl-tr")&&(t=9-t),(t!==this.lastX||i!==this.lastY)&&(k(t,i,n.control),this.lastX=t,this.lastY=i))},onkeydown:function(n){var t=this.lastX,i=this.lastY,r;switch(n.keyCode){case 37:t>0&&(t--,r=!0);break;case 39:r=!0;t<9&&t++;break;case 38:r=!0;i>0&&i--;break;case 40:r=!0;i<9&&i++}r&&(n.preventDefault(),n.stopPropagation(),k(t,i,n.control).focus(),this.lastX=t,this.lastY=i)},onclick:function(n){var t=this;n.target.tagName.toUpperCase()=="A"&&(n.preventDefault(),n.stopPropagation(),t.parent().cancel(),u.undoManager.transact(function(){d(t.lastX+1,t.lastY+1)}),u.addVisual())}}]}),u.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:nt,onclick:a}),u.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:nt,cmd:"mceTableDelete"}),u.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:e("mceTableCellProps"),onPostRender:s},{text:"Merge cells",onclick:e("mceTableMergeCells"),onPostRender:s},{text:"Split cell",onclick:e("mceTableSplitCells"),onPostRender:s}]}),u.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:e("mceTableInsertRowBefore"),onPostRender:s},{text:"Insert row after",onclick:e("mceTableInsertRowAfter"),onPostRender:s},{text:"Delete row",onclick:e("mceTableDeleteRow"),onPostRender:s},{text:"Row properties",onclick:e("mceTableRowProps"),onPostRender:s},{text:"-"},{text:"Cut row",onclick:e("mceTableCutRow"),onPostRender:s},{text:"Copy row",onclick:e("mceTableCopyRow"),onPostRender:s},{text:"Paste row before",onclick:e("mceTablePasteRowBefore"),onPostRender:s},{text:"Paste row after",onclick:e("mceTablePasteRowAfter"),onPostRender:s}]}),u.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:e("mceTableInsertColBefore"),onPostRender:s},{text:"Insert column after",onclick:e("mceTableInsertColAfter"),onPostRender:s},{text:"Delete column",onclick:e("mceTableDeleteCol"),onPostRender:s}]}),v=[],o("inserttable tableprops deletetable | cell row column".split(" "),function(n){n=="|"?v.push({text:"-"}):v.push(u.menuItems[n])}),u.addButton("table",{type:"menubutton",title:"Table",menu:v}),!f.isIE)u.on("click",function(n){n=n.target;n.nodeName==="TABLE"&&(u.selection.select(n),u.nodeChanged())});y.quirks=new t(u);u.on("Init",function(){y.cellSelection=new i(u)});if(o({mceTableSplitCells:function(n){n.split()},mceTableMergeCells:function(n){var t;t=u.dom.getParent(u.selection.getStart(),"th,td");u.dom.select("td.mce-item-selected,th.mce-item-selected").length?n.merge():it(n,t)},mceTableInsertRowBefore:function(n){n.insertRow(!0)},mceTableInsertRowAfter:function(n){n.insertRow()},mceTableInsertColBefore:function(n){n.insertCol(!0)},mceTableInsertColAfter:function(n){n.insertCol()},mceTableDeleteCol:function(n){n.deleteCols()},mceTableDeleteRow:function(n){n.deleteRows()},mceTableCutRow:function(n){l=n.cutRows()},mceTableCopyRow:function(n){l=n.copyRows()},mceTablePasteRowBefore:function(n){n.pasteRows(l,!0)},mceTablePasteRowAfter:function(n){n.pasteRows(l)},mceTableDelete:function(n){n.deleteTable()}},function(t,i){u.addCommand(i,function(){var i=new n(u);i&&(t(i),u.execCommand("mceRepaint"),y.cellSelection.clear())})}),o({mceInsertTable:function(){a()},mceTableRowProps:ut,mceTableCellProps:rt},function(n,t){u.addCommand(t,function(t,i){n(i)})}),u.settings.table_tab_navigation!==!1)u.on("keydown",function(t){var r,i,f;t.keyCode==9&&(r=u.dom.getParent(u.selection.getStart(),"th,td"),r&&(t.preventDefault(),i=new n(u),f=t.shiftKey?-1:1,u.undoManager.transact(function(){!i.moveRelIdx(r,f)&&f>0&&(i.insertRow(),i.refresh(),i.moveRelIdx(r,f))})))})}var o=r.each;e.add("table",s)})})(this);
/*
//# sourceMappingURL=plugin.min.js.map
*/