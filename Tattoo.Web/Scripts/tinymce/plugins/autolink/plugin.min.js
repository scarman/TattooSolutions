tinymce.PluginManager.add("autolink",function(n){function r(n){t(n,-1,"(",!0)}function u(n){t(n,0,"",!0)}function f(n){t(n,-1,"",!1)}function t(n,t,i){function y(n,t){if(t<0&&(t=0),n.nodeType==3){var i=n.data.length;t>i&&(t=i)}return t}function h(n,t){r.setStart(n,y(n,t))}function s(n,t){r.setEnd(n,y(n,t))}var r,f,c,u,v,l,e,o,a;if(r=n.selection.getRng(!0).cloneRange(),r.startOffset<5){if(o=r.endContainer.previousSibling,!o){if(!r.endContainer.firstChild||!r.endContainer.firstChild.nextSibling)return;o=r.endContainer.firstChild.nextSibling}if(a=o.length,h(o,a),s(o,a),r.endOffset<5)return;f=r.endOffset;u=o}else{if(u=r.endContainer,u.nodeType!=3&&u.firstChild){while(u.nodeType!=3&&u.firstChild)u=u.firstChild;u.nodeType==3&&(h(u,0),s(u,u.nodeValue.length))}f=r.endOffset==1?2:r.endOffset-1-t}c=f;do h(u,f>=2?f-2:0),s(u,f>=1?f-1:0),f-=1;while(r.toString()!=" "&&r.toString()!==""&&r.toString().charCodeAt(0)!=160&&f-2>=0&&r.toString()!=i);r.toString()==i||r.toString().charCodeAt(0)==160?(h(u,f),s(u,c),f+=1):r.startOffset===0?(h(u,0),s(u,c)):(h(u,f),s(u,c));l=r.toString();l.charAt(l.length-1)=="."&&s(u,c-1);l=r.toString();e=l.match(/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i);e&&(e[1]=="www."?e[1]="http://www.":/@$/.test(e[1])&&!/^mailto:/.test(e[1])&&(e[1]="mailto:"+e[1]),v=n.selection.getBookmark(),n.selection.setRng(r),n.execCommand("createlink",!1,e[1]+e[2]),n.selection.moveToBookmark(v),n.nodeChanged())}var i;n.on("keydown",function(t){if(t.keyCode==13)return f(n)});if(tinymce.Env.ie){n.on("focus",function(){if(!i){i=!0;try{n.execCommand("AutoUrlDetect",!1,!0)}catch(t){}}});return}n.on("keypress",function(t){if(t.keyCode==41)return r(n)});n.on("keyup",function(t){if(t.keyCode==32)return u(n)})});
/*
//# sourceMappingURL=plugin.min.js.map
*/