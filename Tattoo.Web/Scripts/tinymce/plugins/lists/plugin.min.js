tinymce.PluginManager.add("lists",function(n){function t(n){return n&&/^(OL|UL|DL)$/.test(n.nodeName)}function r(n){return n.parentNode.firstChild==n}function f(n){return n.parentNode.lastChild==n}function u(t){return t&&!!n.schema.getTextBlockElements()[t.nodeName]}var i=this;n.on("init",function(){function h(n){function i(i){var f,r,u;r=n[i?"startContainer":"endContainer"];u=n[i?"startOffset":"endOffset"];r.nodeType==1&&(f=e.create("span",{"data-mce-type":"bookmark"}),r.hasChildNodes()?(u=Math.min(u,r.childNodes.length-1),i?r.insertBefore(f,r.childNodes[u]):e.insertAfter(f,r.childNodes[u])):r.appendChild(f),r=f,u=0);t[i?"startContainer":"endContainer"]=r;t[i?"startOffset":"endOffset"]=u}var t={};return i(!0),n.collapsed||i(),t}function c(n){function i(t){function f(n){for(var t=n.parentNode.firstChild,i=0;t;){if(t==n)return i;(t.nodeType!=1||t.getAttribute("data-mce-type")!="bookmark")&&i++;t=t.nextSibling}return-1}var i,r,u;(i=u=n[t?"startContainer":"endContainer"],r=n[t?"startOffset":"endOffset"],i)&&(i.nodeType==1&&(r=f(i),i=i.parentNode,e.remove(u)),n[t?"startContainer":"endContainer"]=i,n[t?"startOffset":"endOffset"]=r)}i(!0);i();var t=e.createRng();t.setStart(n.startContainer,n.startOffset);n.endContainer&&t.setEnd(n.endContainer,n.endOffset);o.setRng(t)}function s(t,i){var u,r,f=e.createFragment(),o,h=n.schema.getBlockElements(),s;if(n.settings.forced_root_block&&(i=i||n.settings.forced_root_block),i&&(r=e.create(i),r.tagName===n.settings.forced_root_block&&e.setAttribs(r,n.settings.forced_root_block_attrs),f.appendChild(r)),t)while(u=t.firstChild)s=u.nodeName,o||s=="SPAN"&&u.getAttribute("data-mce-type")=="bookmark"||(o=!0),h[s]?(f.appendChild(u),r=null):i?(r||(r=e.create(i),f.appendChild(r)),r.appendChild(u)):f.appendChild(u);return n.settings.forced_root_block?!o&&(!tinymce.Env.ie||tinymce.Env.ie>10)&&r.appendChild(e.create("br",{"data-mce-bogus":"1"})):f.appendChild(e.create("br")),f}function l(){return tinymce.grep(o.getSelectedBlocks(),function(n){return/^(LI|DT|DD)$/.test(n.nodeName)})}function y(n,t,i){var r,u,f=e.select('span[data-mce-type="bookmark"]',n);i=i||s(t);r=e.createRng();r.setStartAfter(t);r.setEndAfter(n);u=r.extractContents();e.isEmpty(u)||e.insertAfter(u,n);e.insertAfter(i,n);e.isEmpty(t.parentNode)&&(tinymce.each(f,function(n){t.parentNode.parentNode.insertBefore(n,t.parentNode)}),e.remove(t.parentNode));e.remove(t)}function p(n){var i,r;if(i=n.nextSibling,i&&t(i)&&i.nodeName==n.nodeName){while(r=i.firstChild)n.appendChild(r);e.remove(i)}if(i=n.previousSibling,i&&t(i)&&i.nodeName==n.nodeName){while(r=i.firstChild)n.insertBefore(r,n.firstChild);e.remove(i)}}function g(n){tinymce.each(tinymce.grep(e.select("ol,ul",n)),function(n){var i,r=n.parentNode;r.nodeName=="LI"&&r.firstChild==n&&(i=r.previousSibling,i&&i.nodeName=="LI"&&(i.appendChild(n),e.isEmpty(r)&&e.remove(r)));t(r)&&(i=r.previousSibling,i&&i.nodeName=="LI"&&i.appendChild(n))})}function w(n){function h(n){e.isEmpty(n)&&e.remove(n)}var u=n.parentNode,i=u.parentNode,o;return n.nodeName=="DD"?(e.rename(n,"DT"),!0):r(n)&&f(n)?(i.nodeName=="LI"?(e.insertAfter(n,i),h(i),e.remove(u)):t(i)?e.remove(u,!0):(i.insertBefore(s(n),u),e.remove(u)),!0):r(n)?(i.nodeName=="LI"?(e.insertAfter(n,i),n.appendChild(u),h(i)):t(i)?i.insertBefore(n,u):(i.insertBefore(s(n),u),e.remove(n)),!0):f(n)?(i.nodeName=="LI"?e.insertAfter(n,i):t(i)?e.insertAfter(n,u):(e.insertAfter(s(n),u),e.remove(n)),!0):(i.nodeName=="LI"?(u=i,o=s(n,"LI")):o=t(i)?s(n,"LI"):s(n),y(u,n,o),g(u.parentNode),!0)}function nt(n){function u(i,r){var u;if(t(i)){while(u=n.lastChild.firstChild)r.appendChild(u);e.remove(i)}}var i,r;return n.nodeName=="DT"?(e.rename(n,"DD"),!0):(i=n.previousSibling,i&&t(i))?(i.appendChild(n),!0):i&&i.nodeName=="LI"&&t(i.lastChild)?(i.lastChild.appendChild(n),u(n.lastChild,i.lastChild),!0):(i=n.nextSibling,i&&t(i))?(i.insertBefore(n,i.firstChild),!0):i&&i.nodeName=="LI"&&t(n.lastChild)?!1:(i=n.previousSibling,i&&i.nodeName=="LI")?(r=e.create(n.parentNode.nodeName),i.appendChild(r),r.appendChild(n),u(n.lastChild,r),!0):!1}function b(){var i=l(),r,t;if(i.length){for(r=h(o.getRng(!0)),t=0;t<i.length;t++)if(!nt(i[t])&&t===0)break;return c(r),n.nodeChanged(),!0}}function k(){var i=l(),f,t,u,e,r;if(i.length){for(f=h(o.getRng(!0)),e=n.getBody(),t=i.length;t--;)for(r=i[t].parentNode;r&&r!=e;){for(u=i.length;u--;)if(i[u]===r){i.splice(t,1);break}r=r.parentNode}for(t=0;t<i.length;t++)if(!w(i[t])&&t===0)break;return c(f),n.nodeChanged(),!0}}function tt(i){function l(){function s(n){var t,i;for(t=r[n?"startContainer":"endContainer"],i=r[n?"startOffset":"endOffset"],t.nodeType==1&&(t=t.childNodes[Math.min(i,t.childNodes.length-1)]||t);t.parentNode!=o;){if(u(t)||/^(TD|TH)$/.test(t.parentNode.nodeName))return t;t=t.parentNode}return t}for(var f=[],o=n.getBody(),c=s(!0),l=s(),t,h=[],i=c;i;i=i.nextSibling)if(h.push(i),i==l)break;return tinymce.each(h,function(n){if(u(n)){f.push(n);t=null;return}if(e.isBlock(n)||n.nodeName=="BR"){n.nodeName=="BR"&&e.remove(n);t=null;return}var i=n.nextSibling;if(tinymce.dom.BookmarkManager.isBookmarkNode(n)&&(u(i)||!i&&n.parentNode==o)){t=null;return}t||(t=e.create("p"),n.parentNode.insertBefore(t,n),f.push(t));t.appendChild(n)}),f}var r=o.getRng(!0),s=h(r),f="LI";i=i.toUpperCase();i=="DL"&&(f="DT");tinymce.each(l(),function(n){var u,r;r=n.previousSibling;r&&t(r)&&r.nodeName==i?(u=r,n=e.rename(n,f),r.appendChild(n)):(u=e.create(i),n.parentNode.insertBefore(u,n),u.appendChild(n),n=e.rename(n,f));p(u)});c(s)}function d(){var i=h(o.getRng(!0)),r=n.getBody();tinymce.each(l(),function(n){var i,u;if(e.isEmpty(n)){w(n);return}for(i=n;i&&i!=r;i=i.parentNode)t(i)&&(u=i);y(u,n)});c(i)}function a(n){var t=e.getParent(o.getStart(),"OL,UL,DL"),i;t?t.nodeName==n?d(n):(i=h(o.getRng(!0)),p(e.rename(t,n)),c(i)):tt(n)}function v(t){return function(){var i=e.getParent(n.selection.getStart(),"UL,OL,DL");return i&&i.nodeName==t}}var e=n.dom,o=n.selection;i.backspaceDelete=function(n){function l(n,t){var i=n.startContainer,r=n.startOffset,u;if(i.nodeType==3&&(t?r<i.data.length:r>0))return i;for(u=new tinymce.dom.TreeWalker(n.startContainer);i=u[t?"next":"prev"]();)if(i.nodeType==3&&i.data.length>0)return i}function f(n,i){var r,u,f=n.parentNode;for(t(i.lastChild)&&(u=i.lastChild),r=i.lastChild,r&&r.nodeName=="BR"&&n.hasChildNodes()&&e.remove(r);r=n.firstChild;)i.appendChild(r);u&&i.appendChild(u);e.remove(n);e.isEmpty(f)&&e.remove(f)}var i,u,r,s;if(o.isCollapsed()&&(i=e.getParent(o.getStart(),"LI"),i)){if(u=o.getRng(!0),r=e.getParent(l(u,n),"LI"),r&&r!=i)return s=h(u),n?f(r,i):f(i,r),c(s),!0;if(!r&&!n&&d(i.parentNode.nodeName))return!0}};n.addCommand("Indent",function(){if(!b())return!0});n.addCommand("Outdent",function(){if(!k())return!0});n.addCommand("InsertUnorderedList",function(){a("UL")});n.addCommand("InsertOrderedList",function(){a("OL")});n.addCommand("InsertDefinitionList",function(){a("DL")});n.addQueryStateHandler("InsertUnorderedList",v("UL"));n.addQueryStateHandler("InsertOrderedList",v("OL"));n.addQueryStateHandler("InsertDefinitionList",v("DL"));n.on("keydown",function(t){t.keyCode==9&&n.dom.getParent(n.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?k():b())})});n.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(){var t=this;n.on("nodechange",function(){for(var i,f=n.selection.getSelectedBlocks(),e=!1,u=0,o=f.length;!e&&u<o;u++)i=f[u].nodeName,e=i=="LI"&&r(f[u])||i=="UL"||i=="OL"||i=="DD";t.disabled(e)})}});n.on("keydown",function(n){n.keyCode==tinymce.util.VK.BACKSPACE?i.backspaceDelete()&&n.preventDefault():n.keyCode==tinymce.util.VK.DELETE&&i.backspaceDelete(!0)&&n.preventDefault()})});
/*
//# sourceMappingURL=plugin.min.js.map
*/