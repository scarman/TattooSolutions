tinymce.PluginManager.add("noneditable",function(n){function r(n){var t;return n.nodeType===1&&((t=n.getAttribute(f),t&&t!=="inherit")||(t=n.contentEditable,t!=="inherit"))?t:null}function u(n){for(var t;n;){if(t=r(n),t)return t==="false"?n:null;n=n.parentNode}}function c(){function h(n){while(n){if(n.id===e)return n;n=n.parentNode}}function a(n){var t;if(n)for(t=new o(n,n),n=t.current();n;n=t.next())if(n.nodeType===3)return n}function v(t,u){var o,h;if(r(t)==="false"&&f.isBlock(t)){i.select(t);return}return h=f.createRng(),r(t)==="true"&&(t.firstChild||t.appendChild(n.getDoc().createTextNode(" ")),t=t.firstChild,u=!0),o=f.create("span",{id:e,"data-mce-bogus":!0},s),u?t.parentNode.insertBefore(o,t):f.insertAfter(o,t),h.setStart(o.firstChild,1),h.collapse(!0),i.setRng(h),o}function c(n){var r,t,u,o;if(n)r=i.getRng(!0),r.setStartBefore(n),r.setEndBefore(n),t=a(n),t&&t.nodeValue.charAt(0)==s&&(t=t.deleteData(0,1)),f.remove(n,!0),i.setRng(r);else for(u=h(i.getStart());(n=f.get(e))&&n!==o;)u!==n&&(t=a(n),t&&t.nodeValue.charAt(0)==s&&(t=t.deleteData(0,1)),f.remove(n,!0)),o=n}function l(){function h(n,i){var u,f,h,e,s,c;if(u=t.startContainer,f=t.startOffset,u.nodeType==3){if(s=u.nodeValue.length,f>0&&f<s||(i?f==s:f===0))return}else if(f<u.childNodes.length)c=!i&&f>0?f-1:f,u=u.childNodes[c],u.hasChildNodes()&&(u=u.firstChild);else return i?null:n;for(h=new o(u,n);e=h[i?"prev":"next"]();){if(e.nodeType===3&&e.nodeValue.length>0)return;if(r(e)==="true")return e}return n}var n,f,s,t,e;c();s=i.isCollapsed();n=u(i.getStart());f=u(i.getEnd());(n||f)&&(t=i.getRng(!0),s?(n=n||f,(e=h(n,!0))?v(e,!0):(e=h(n,!1))?v(e,!1):i.select(n)):(t=i.getRng(!0),n&&t.setStartBefore(n),f&&t.setEndAfter(f),i.setRng(t)))}function y(e){function k(n,t){while(n=n[t?"previousSibling":"nextSibling"])if(n.nodeType!==3||n.nodeValue.length>0)return n}function p(n,t){i.select(n);i.collapse(t)}function nt(t){function a(n){for(var t=e;t;){if(t===n)return;t=t.parentNode}f.remove(n);l()}function v(){for(var i,o=n.schema.getNonEmptyElements(),f=new tinymce.dom.TreeWalker(e,n.getBody());i=t?f.prev():f.next();){if(o[i.nodeName.toLowerCase()])break;if(i.nodeType===3&&tinymce.trim(i.nodeValue).length>0)break;if(r(i)==="false")return a(i),!0}return u(i)?!0:!1}var s,e,o,c;if(i.isCollapsed()){if(s=i.getRng(!0),e=s.startContainer,o=s.startOffset,e=h(e)||e,c=u(e))return a(c),!1;if(e.nodeType==3&&(t?o>0:o<e.nodeValue.length))return!0;if(e.nodeType==1&&(e=e.childNodes[o]||e),v())return!1}return!0}var s=e.keyCode,a,v,w,b,y;if(w=i.getStart(),b=i.getEnd(),a=u(w)||u(b),a&&(s<112||s>124)&&s!=t.DELETE&&s!=t.BACKSPACE){if((tinymce.isMac?e.metaKey:e.ctrlKey)&&(s==67||s==88||s==86))return;if(e.preventDefault(),s==t.LEFT||s==t.RIGHT)if(y=s==t.LEFT,n.dom.isBlock(a)){var d=y?a.previousSibling:a.nextSibling,g=new o(d,d),tt=y?g.prev():g.next();p(tt,!y)}else p(a,y)}else if(s==t.LEFT||s==t.RIGHT||s==t.BACKSPACE||s==t.DELETE){if(v=h(w),v){if(s==t.LEFT||s==t.BACKSPACE)if(a=k(v,!0),a&&r(a)==="false")if(e.preventDefault(),s==t.LEFT)p(a,!0);else{f.remove(a);return}else c(v);if(s==t.RIGHT||s==t.DELETE)if(a=k(v),a&&r(a)==="false")if(e.preventDefault(),s==t.RIGHT)p(a,!1);else{f.remove(a);return}else c(v)}if((s==t.BACKSPACE||s==t.DELETE)&&!nt(s==t.BACKSPACE))return e.preventDefault(),!1}}var f=n.dom,i=n.selection,e="mce_noneditablecaret",s="﻿";n.on("mousedown",function(t){var i=n.selection.getNode();r(i)==="false"&&i==t.target&&l()});n.on("mouseup keyup",l);n.on("keydown",y)}function l(t){var u=i.length,r=t.content,f=tinymce.trim(s);if(t.format!="raw"){while(u--)r=r.replace(i[u],function(t){var i=arguments,u=i[i.length-2];return u>0&&r.charAt(u-1)=='"'?t:'<span class="'+f+'" data-mce-content="'+n.dom.encode(i[0])+'">'+n.dom.encode(typeof i[1]=="string"?i[1]:i[0])+"<\/span>"});t.content=r}}var o=tinymce.dom.TreeWalker,e="contenteditable",f="data-mce-"+e,t=tinymce.util.VK,h,s,i;h=" "+tinymce.trim(n.getParam("noneditable_editable_class","mceEditable"))+" ";s=" "+tinymce.trim(n.getParam("noneditable_noneditable_class","mceNonEditable"))+" ";i=n.getParam("noneditable_regexp");i&&!i.length&&(i=[i]);n.on("PreInit",function(){if(c(),i)n.on("BeforeSetContent",l);n.parser.addAttributeFilter("class",function(n){for(var r=n.length,i,t;r--;)t=n[r],i=" "+t.attr("class")+" ",i.indexOf(h)!==-1?t.attr(f,"true"):i.indexOf(s)!==-1&&t.attr(f,"false")});n.serializer.addAttributeFilter(f,function(n){for(var r=n.length,t;r--;)t=n[r],i&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):(t.attr(e,null),t.attr(f,null))});n.parser.addAttributeFilter(e,function(n){for(var i=n.length,t;i--;)t=n[i],t.attr(f,t.attr(e)),t.attr(e,null)})});n.on("drop",function(n){u(n.target)&&n.preventDefault()})});
/*
//# sourceMappingURL=plugin.min.js.map
*/