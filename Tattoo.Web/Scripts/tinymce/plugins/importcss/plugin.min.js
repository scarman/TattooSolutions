tinymce.PluginManager.add("importcss",function(n){function i(n){return typeof n=="string"?function(t){return t.indexOf(n)!==-1}:n instanceof RegExp?function(t){return n.test(t)}:n}function f(i,r){function u(n,i){var e=n.href,o;if(e&&r(e,i)){t(n.imports,function(n){u(n,!0)});try{o=n.cssRules||n.rules}catch(s){}t(o,function(n){n.styleSheet?u(n.styleSheet,!0):n.selectorText&&t(n.selectorText.split(","),function(n){f.push(tinymce.trim(n))})})}}var f=[],e={};t(n.contentCSS,function(n){e[n]=!0});r||(r=function(n,t){return t||e[n]});try{t(i.styleSheets,function(n){u(n)})}catch(o){}return f}function u(t){var i,u=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(u){var r=u[1],f=u[2].substr(1).split(".").join(" "),e=tinymce.makeMap("a,img");return u[1]?(i={title:t},n.schema.getTextBlockElements()[r]?i.block=r:n.schema.getBlockElements()[r]||e[r.toLowerCase()]?i.selector=r:i.inline=r):u[2]&&(i={inline:"span",title:t.substr(1),classes:f}),n.settings.importcss_merge_classes!==!1?i.classes=f:i.attributes={"class":f},i}}var r=this,t=tinymce.each;n.on("renderFormatsMenu",function(e){var s=n.settings,c={},a=s.importcss_selector_converter||u,l=i(s.importcss_selector_filter),h=e.control,o;n.settings.importcss_append||h.items().remove();o=[];tinymce.each(s.importcss_groups,function(n){n=tinymce.extend({},n);n.filter=i(n.filter);o.push(n)});t(f(e.doc||n.getDoc(),i(s.importcss_file_filter)),function(t){var u,f,e,i,s;if(t.indexOf(".mce-")===-1&&!c[t]&&(!l||l(t))){if(u=a.call(r,t),u){if(e=u.name||tinymce.DOM.uniqueId(),o)for(i=0;i<o.length;i++)if(!o[i].filter||o[i].filter(t)){o[i].item||(o[i].item={text:o[i].title,menu:[]});f=o[i].item.menu;break}n.formatter.register(e,u);s=tinymce.extend({},h.settings.itemDefaults,{text:u.title,format:e});f?f.push(s):h.add(s)}c[t]=!0}});t(o,function(n){h.add(n.item)});e.control.renderNew()});r.convertSelectorToFormat=u});
/*
//# sourceMappingURL=plugin.min.js.map
*/